---
title: 快速翻墙命令
categories:
 - server
tags:
 - 玩机
date: 2023-4-7 02:12:00
updated: 2023-05-28 22:41:31
---
### Google BBR 一键加速VPS

```bash
wget https://raw.githubusercontent.com/bannedbook/fanqiang/master/v2ss/server-cfg/sysctl.conf -O -> /etc/sysctl.conf
```

```bash
sysctl -p
```

### V2ray官方一键安装脚本

```bash
apt-get install -y curl
bash <(curl -L https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-release.sh)
```

**下载参考配置文件：**
```bash
wget https://raw.githubusercontent.com/bannedbook/fanqiang/master/v2ss/server-cfg/v2/config.json  -O -> /usr/local/etc/v2ray/config.json
```

安装完成后，运行 `service v2ray restart` 启动

### vultr debian 10 默认只开了 ssh 端口

```bash
ufw allow 80/tcp  
ufw allow 80/udp

ufw allow 24380/tcp
ufw allow 24380/udp
```

### 安装 acme.sh

```bash
apt-get -y install netcat
apt-get install socat
```

```bash
curl  https://get.acme.sh | sh
```

```bash
source ~/.bashrc
```

注册登录：
```bash
sudo ~/.acme.sh/acme.sh --register-account -m your-email@example.com
```


### 域名证书生成

**主域名：**
```bash
sudo ~/.acme.sh/acme.sh --issue -d wrxinyue.xyz --standalone -k ec-256
```

手动更新ECC证书：
```bash
sudo ~/.acme.sh/acme.sh --renew -d wrxinyue.xyz --force --ecc
```

手动更新REA证书：
```bash
sudo ~/.acme.sh/acme.sh --renew -d wrxinyue.xyz --force --ecc
```

**多个子域名：**
```bash
sudo ~/.acme.sh/acme.sh --issue --standalone -k ec-256 -d wrxinyue.xyz -d www.wrxinyue.xyz -d v01.wrxinyue.xyz -d v02.wrxinyue.xyz -d v03.wrxinyue.xyz -d v04.wrxinyue.xyz -d v05.wrxinyue.xyz -d v06.wrxinyue.xyz -d v07.wrxinyue.xyz -d v08.wrxinyue.xyz -d v09.wrxinyue.xyz
```

手动更新子域名ECC证书：
```bash
sudo ~/.acme.sh/acme.sh --renew -d wrxinyue.xyz -d www.wrxinyue.xyz -d v01.wrxinyue.xyz -d v02.wrxinyue.xyz -d v03.wrxinyue.xyz -d v04.wrxinyue.xyz -d v05.wrxinyue.xyz -d v06.wrxinyue.xyz -d v07.wrxinyue.xyz -d v08.wrxinyue.xyz -d v09.wrxinyue.xyz --force --ecc
```

手动更新子域名ESA证书：
```bash
sudo ~/.acme.sh/acme.sh --renew -d wrxinyue.xyz -d www.wrxinyue.xyz -d v01.wrxinyue.xyz -d v02.wrxinyue.xyz -d v03.wrxinyue.xyz -d v04.wrxinyue.xyz -d v05.wrxinyue.xyz -d v06.wrxinyue.xyz -d v07.wrxinyue.xyz -d v08.wrxinyue.xyz -d v09.wrxinyue.xyz --force
```

### 安装证书和密钥

首先创建目录文件：
```bash
sudo mkdir -p /etc/v2ray/
```

**ECC 证书**
将证书和密钥安装到 /etc/v2ray 中：
```bash
sudo ~/.acme.sh/acme.sh --installcert -d wrxinyue.xyz --fullchainpath /etc/v2ray/v2ray.crt --keypath /etc/v2ray/v2ray.key --ecc
```
或者同时将子域名证书和密钥安装到 /etc/v2ray 中：
```bash
sudo ~/.acme.sh/acme.sh --installcert -d wrxinyue.xyz -d www.wrxinyue.xyz -d v01.wrxinyue.xyz -d v02.wrxinyue.xyz -d v03.wrxinyue.xyz -d v04.wrxinyue.xyz -d v05.wrxinyue.xyz -d v06.wrxinyue.xyz -d v07.wrxinyue.xyz -d v08.wrxinyue.xyz -d v09.wrxinyue.xyz --fullchainpath /etc/v2ray/v2ray.crt --keypath /etc/v2ray/v2ray.key --ecc
```

**RSA 证书**
```bash
sudo ~/.acme.sh/acme.sh --installcert -d wrxinyue.xyz --fullchainpath /etc/v2ray/v2ray.crt --keypath /etc/v2ray/v2ray.key
```
或者同时将子域名证书和密钥安装到 /etc/v2ray 中：
```bash
sudo ~/.acme.sh/acme.sh --installcert -d wrxinyue.xyz -d www.wrxinyue.xyz -d v01.wrxinyue.xyz -d v02.wrxinyue.xyz -d v03.wrxinyue.xyz -d v04.wrxinyue.xyz -d v05.wrxinyue.xyz -d v06.wrxinyue.xyz -d v07.wrxinyue.xyz -d v08.wrxinyue.xyz -d v09.wrxinyue.xyz --fullchainpath /etc/v2ray/v2ray.crt --keypath /etc/v2ray/v2ray.key
```

**注意：无论什么情况，密钥(即上面的v2ray.key)都不能泄漏，如果你不幸泄漏了密钥，可以使用 acme.sh 将原证书吊销，再生成新的证书，吊销方法请自行参考 acme.sh 的手册**

**由于本例中将证书生成到 `/etc/v2ray/` 文件夹，更新证书之后还得把新证书生成到 /etc/v2ray。**

开启文件权限：
```bash
sudo chmod 644 /etc/v2ray/v2ray.key
```


## 配置 V2Ray

```bash
vi /usr/local/etc/v2ray/config.json
```

**服务器：**
```json
{
  "inbounds": [
    {
      "port": 443, // 建议使用 443 端口
      "protocol": "vmess",    
      "settings": {
        "clients": [
          {
            "id": "23ad6b10-8d1a-40f7-8ad0-e3e35cd38297",  
            "alterId": 0
          }
        ]
      },
      "streamSettings": {
        "network": "ws", // 设置为 WebSocket
        "security": "tls", // security 要设置为 tls 才会启用 TLS
        "tlsSettings": {
          "certificates": [
            {
              "certificateFile": "/etc/v2ray/v2ray.crt", // 证书文件
              "keyFile": "/etc/v2ray/v2ray.key" // 密钥文件
            }
          ]
        }
      }
    }
  ],
  "outbounds": [
    {
      "protocol": "freedom",
      "settings": {}
    }
  ]
}
```

检查配置文件：
```bash
/usr/local/bin/v2ray test -config /usr/local/etc/v2ray/config.json
```

配置完重启：
```bash
systemctl restart v2ray
```

查看状态：
```bash
systemctl status v2ray
```

随后用www.ssllabs.com测试即可


### 常用命令

控制 V2Ray 的运行的常用命令：
`service v2ray restart | force-reload |start|stop|status|reload`

测试V2Ray配置文件：
`/usr/local/bin/v2ray test -config /usr/local/etc/v2ray/config.json`