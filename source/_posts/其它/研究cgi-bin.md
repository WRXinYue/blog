---
title: 研究cgi-bin
date: 2023-01-11 17:01:51
tags:
---

 ## What is CGI

> CGI虽然已经被业界主流淘汰，但是通过学习它可以加深WebServer通信、Http协议的深成认识，了解CGI之后就可以学习Servlet，我打算深入学习并打固基础。

**通用网关接口** (Common Gateway Interface，CGI), 是在1990年代早期创建的一个用来在Web服务器和应用程序之间传递信息的标准。





### Common

CGI是一种用于在Web服务器和其它应用程序之间传递信息的标准，具有较高的通用性。

CGI程序可以是任意的可执行程序，例如Java、Perl、Python、Ruby和C/C++等。理论上来说，所有支持标准输入和输出、支持获取环境变量的编程语言都能用来编写CGI程序。

Servlet、WSGI（Web Server Gateway Interface，Web 服务器网关接口）等都可以实现类似CGI的功能。

CGI的通用性是一个显著特性，它可以用于各种编程语言，并且可以用来实现各种功能。



### Gateway

CGI可以看作是一个软件网关或者协议翻译机，它负责在Web服务器和应用程序之间通信。通常情况下，Web服务器和应用程序使用的协议是不同的，因此CGI程序负责将Web服务器使用的HTTP协议翻译成应用程序能理解的协议，或者将应用程序使用的协议翻译成HTTP协议。

![image-20230109222510813](https://wrxinyue.oss-cn-hongkong.aliyuncs.com/img/image-20230109222510813.png)

（如上是来自于[果冻虾仁](https://www.zhihu.com/people/guodongxiaren)大佬的图，图画的不错///）

CGI程序是一种在Web服务器上执行的可执行程序，它可以通过Web服务器处理用户的请求并返回动态生成的内容。Web服务器通常部署在后台服务器上，用于提供Web内容和服务，而后台服务器则是运行在后台的服务器，通常负责处理后台业务逻辑和数据处理。

有一点要注意，就是CGI程序可以获得输入并返回输出，但是它们是通过特定的接口进行交互的，而不是直接从Web服务器中获得输入。关于CGI程序如何从Web服务器中获得输入的细节，可以在下一节中进一步了解。



### Interface

CGI是一种接口协议，它定义了Web服务器和CGI程序之间的通信方式。CGI程序通常部署到Web服务器上，Web服务器会调用CGI程序来处理用户的请求并返回动态生成的内容。CGI协议描述了CGI程序是如何获取用户的输入，如何将输出返回给Web服务器，以及如何处理错误和异常情况。CGI协议并不直接描述报文内容的详细语义，而是描述了CGI程序与Web服务器之间的交互方式。



## 网页请求与响应

在进行网页浏览时，通常会通过URL（Uniform Resource Locator，统一资源定位器）是一种用于描述网络位置的字符串，包括了资源协议、主机名、端口号以及路径等信息。浏览器会根据URL中描述的信息向服务器发出HTTP请求，要求服务器返回网页文件。

服务器收到请求后，会根据请求的URL和响应的规则，返回对应的网页文件。这个网页文件可能是一个静态的HTML文件，也可能是一个动态生成的文件，例如通过CGI程序生成的文件。

在服务器返回网页文件后，浏览器会接收到服务器返回的网页文件，并根据文件内容来渲染显示网页。如果这个网页文件包含了图片、视频、音频等多媒体资源，浏览器还会根据文件内容，向服务器发出多个请求来获取这些资源。

当浏览器接受到所有资源之后，将会网页渲染完成，并显示在屏幕上，用户就可以在浏览器中浏览这些网页。

简单来说，在浏览网页时，浏览器通过URL请求网页文件，服务器返回网页文件，浏览器根据文件内容渲染显示页面，这就是浏览网页的一般流程。



## References

1. [RFC 3875: The Common Gateway Interface (CGI) Version 1.1](https://www.rfc-editor.org/rfc/rfc3875)
2. [The Magic of cgi-bin](https://www.youtube.com/watch?v=NwRVJX0Ieno)
3. [万法归宗——CGI](https://zhuanlan.zhihu.com/p/25013398)
